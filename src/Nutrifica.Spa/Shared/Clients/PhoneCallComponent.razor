@using Nutrifica.Api.Contracts.Clients
<MudPaper Outlined="true" Class="pa-1 my-1 mx-2" MaxWidth="100%">
    <MudPaper Elevation="0" Class="d-flex justify-space-between">
        <LocalTime DateTime="@PhoneCall.CreatedOn"/>

        <MudText Typo="Typo.caption" Inline="true">
            @PhoneCall.CreatedBy.FirstName @PhoneCall.CreatedBy.LastName
        </MudText>
    </MudPaper>

    <MudDivider DividerType="DividerType.FullWidth"/>

    <MudStack Row Class="justify-space-between">
        <MudText Class="pa-3" Typo="Typo.body2">
            @* @(string.Join("<br>", PhoneCall.Comment.Split('\n'))) *@
            @foreach (var line in PhoneCall.Comment.Split('\n', StringSplitOptions.None))
            {
                @line<br>
            }
        </MudText>
        
        <MudStack Row Class="column-gap-0">

            <MudIconButton Icon="@Icons.Material.Filled.Edit"
                           Size="Size.Small" 
                           Class="align-self-center"
                           OnClick="@OnClickEditPhoneCall"/>
            
            <MudIconButton Icon="@Icons.Material.Filled.Delete"
                           Size="Size.Small" 
                           Class="align-self-center"
                           OnClick="@OnClickDeletePhoneCall"/>
        </MudStack>

    </MudStack>
</MudPaper>

@code {
    [Parameter] public PhoneCallDto PhoneCall { get; set; }
    [Parameter] public EventCallback<PhoneCallDto> OnUpdate { get; set; }
    [Parameter] public EventCallback<PhoneCallDto> OnDelete { get; set; }

    private void OnClickEditPhoneCall() => OnUpdate.InvokeAsync(PhoneCall);
    private void OnClickDeletePhoneCall() => OnDelete.InvokeAsync(PhoneCall);
}